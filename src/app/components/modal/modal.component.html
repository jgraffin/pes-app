<h1
  *ngIf="greetingTitle"
  [innerHTML]="greetingTitle"
  class="px-6 text-lg font-bold text-center uppercase"
></h1>

<p
  *ngIf="greetingMessage"
  class="px-6 text-base font-alternate text-center"
  [innerHTML]="greetingMessage"
></p>

<ion-button id="open-modal" class="my-6" color="light" shape="round">
  Adicionar <ion-icon name="add-circle-outline"></ion-icon
></ion-button>

<ion-modal
  #modal
  trigger="open-modal"
  class="ion-modal-custom"
  [initialBreakpoint]="0.6"
  [breakpoints]="[0, 0.25, 0.5, 0.6]"
  [backdropDismiss]="false"
  (willDismiss)="onModalDismiss()"
>
  <ng-template>
    <ion-content>
      <h2
        class="px-6 pt-8 pb-4 flex w-full font-extrabold text-[23px] text-[#4F378B]"
      >
        {{ formTitle }}
      </h2>
      <button
        (click)="onModalDismiss()"
        class="absolute top-4 right-4"
        ion-button
      >
        <ion-icon class="text-2xl text-[#4F378B]" name="close"></ion-icon>
      </button>
      <form [formGroup]="formData" (ngSubmit)="onSubmit()">
        <ion-list class="px-6">
          <ion-item>
            <ion-input
              label="Nome"
              labelPlacement="floating"
              formControlName="name"
              autocomplete="address-line1"
              class="font-alternate"
            ></ion-input>
          </ion-item>
          <p
            class="text-red-700 text-sm my-2 font-bold"
            *ngIf="
              formData.get('name')?.invalid && formData.get('name')?.touched
            "
          >
            Campo obrigat√≥rio e deve ter pelo menos 3 caracteres.
          </p>
          <ion-item button (click)="openTeamModal()">
            <ion-label>Selecione o time</ion-label>
            <ion-text>{{
              formData.get("team")?.value || "Selecione um time"
            }}</ion-text>
          </ion-item>
        </ion-list>

        <div class="flex w-full px-6 justify-end py-4">
          <ion-button color="secondary" shape="round" type="submit"
            >Adicionar</ion-button
          >
        </div>
      </form>
    </ion-content>
  </ng-template>
</ion-modal>

<ion-modal
  #teamModal
  [initialBreakpoint]="0.9"
  [breakpoints]="[0, 0.25, 0.5, 0.9]"
  (willDismiss)="onModalDismissTeams()"
>
  <ion-content>
    <ion-list *ngIf="teams; else noTeams">
      <button
        (click)="onModalDismissTeams()"
        class="absolute top-4 right-4 z-10"
        ion-button
      >
        <ion-icon class="text-2xl text-[#4F378B]" name="close"></ion-icon>
      </button>
      <ion-item
        *ngFor="let item of teams; trackBy: trackById"
        (click)="selectTeam(item)"
      >
        {{ item?.name }}
      </ion-item>
    </ion-list>
    <ng-template #noTeams>
      <p class="text-center text-gray-500">Nenhum time encontrado.</p>
    </ng-template>
  </ion-content>
</ion-modal>
